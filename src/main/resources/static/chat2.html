<!DOCTYPE html>
<html>
<head>
  <title>WebSocket Client</title>
  <meta charset="UTF-8">
</head>
<body>
<script type="text/javascript">

  var ws = null;
  function connectAAA() {
    var wsProtocol = ("https:" == location.protocol ? "wss://" : "ws://");
    ws = new WebSocket(wsProtocol + location.hostname + ":" + location.port + "/chat");
    document.getElementById("send").disabled = false;
    document.getElementById("msg").disabled = false;

    document.getElementById("connect").disabled = true;
    document.getElementById("name").disabled = true;

    ws.onopen = function (ev) {
      console.log("Server Connected.");
      ws.send("Server Connect.")
    }

    ws.onmessage = function (ev) {
      document.getElementById("msgbox").innerHTML += "<div>" + ev.data + "</div>";
    }

    ws.onclose = function (ev) {
      console.log("Server Disconnected.");
      ws = null;
      document.getElementById("send").disabled = true;
      document.getElementById("msg").disabled = true;

      document.getElementById("connect").disabled = false;
      document.getElementById("name").disabled = false;
    }
  }

  function sendBBB() {
    var msg = document.getElementById("msg").value;
    ws.send(msg)
  }

  function sendJson() {
    var data = {
      name: document.getElementById("name").value,
      message: document.getElementById("msg").value
    }
    return data;
  }

</script>

<form>
  <input type="text" id="name" size="30" placeholder="名前を入力して入室してください">
  <input type="button" id="connect" value="入室" onclick="connectAAA()"> <br>

  <input type="text" id="msg" size="50" disabled>
  <input type="button" id="send" value="送信" onclick="sendBBB()" disabled>
</form>
<div id="msgbox" style="border-style: solid;width: 500px;height: 400px"></div>
</body>
</html>